{"remainingRequest":"D:\\GitRepo\\bsm\\front\\node_modules\\babel-loader\\lib\\index.js!D:\\GitRepo\\bsm\\front\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\GitRepo\\bsm\\front\\src\\utils\\request.js","dependencies":[{"path":"D:\\GitRepo\\bsm\\front\\src\\utils\\request.js","mtime":1590764442971},{"path":"D:\\GitRepo\\bsm\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitRepo\\bsm\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GitRepo\\bsm\\front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBxcyBmcm9tICJxcyI7IC8v5aSE55CG5Y+C5pWwCgppbXBvcnQgcm91dGVyIGZyb20gJy4uL3JvdXRlcic7CmltcG9ydCB7IExvYWRpbmcgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwp2YXIgbG9hZGluZyA9IG51bGw7IC8v5byA5aeL5Yqg6L295Yqo55S7CgpmdW5jdGlvbiBvcGVuTG9hZGluZygpIHsKICBsb2FkaW5nID0gTG9hZGluZy5zZXJ2aWNlKHsKICAgIGxvY2s6IHRydWUsCiAgICB0ZXh0OiAn5ou85ZG95Yqg6L295LitLi4uJywKICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsMCwwLC43KScKICB9KTsKfSAvL+WFs+mXreWKoOi9veWKqOeUuwoKCmZ1bmN0aW9uIGNsb3NlTG9hZGluZygpIHsKICBsb2FkaW5nLmNsb3NlKCk7Cn0gLy/mt7vliqDor7fmsYLmi6bmiKrlmagKCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8v5Yqg6L295Yqo55S7CiAgb3BlbkxvYWRpbmcoKTsKCiAgaWYgKGxvY2FsU3RvcmFnZS5zZXNzaW9uKSB7CiAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gbG9jYWxTdG9yYWdlLnNlc3Npb247CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy/mt7vliqDlk43lupTmi6bmiKrlmagKCmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgY2xvc2VMb2FkaW5nKCk7IC8v5YWz6Zet5Yqg6L295Yqo55S7CgogIGlmIChyZXNwb25zZS5kYXRhLmVycm9yQ29kZSA9PSAtMSkgewogICAgLy/lkI7nq6/lj43lm57nmoTnirbmgIHlgLzvvIzmnKzlupTor6VlcnJvckNvZGXmmK9zdGF0dXMKICAgIE1lc3NhZ2UoewogICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgIGR1cmF0aW9uOiAxNTAwLAogICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgIG1lc3NhZ2U6ICflvZPliY3nmbvlvZXlt7LlpLHmlYjvvIzor7fku47mlrDnmbvlvZXvvIEnCiAgICB9KTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJzZXNzaW9uIik7IC8v5riF6Zmkc2Vzc2lvbklkCgogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJOYW1lIik7IC8v5riF6ZmkdXNlcm5hbWUKCiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgibW9kdWxlcyIpOyAvL+a4hemZpOadg+mZkAoKICAgIHJvdXRlci5wdXNoKHsKICAgICAgbmFtZTogJ2xvZ2luJwogICAgfSk7CiAgfQoKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIGNsb3NlTG9hZGluZygpOyAvLyDlhbPpl63liqDovb3liqjnlLsKCiAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlcnJvci5yZXNwb25zZSk7Cn0pOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gImh0dHA6Ly8xMjkuMjA0LjI1MS4xNzk6ODA4MyI7CmF4aW9zLmRlZmF1bHRzLndpdGhDcmVkZW50aWFscyA9IHRydWU7CmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiQ29udGVudC1UeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbiI7CmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsiWC1SZXF1ZXN0ZWQtV2l0aCJdID0gIlhNTEh0dHBSZXF1ZXN0IjsKYXhpb3MuZGVmYXVsdHMudGltZW91dCA9IDYwMDA7IC8v6K6+572u6K+35rGC6LaF5pe25pe26Ze0CgpmdW5jdGlvbiBjaGVja1N0YXR1cyhyZXNwb25zZSwgdHlwZSkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgaWYgKHJlc3BvbnNlICYmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDMwNCB8fCByZXNwb25zZS5zdGF0dXMgPT09IDQwMCkpIHsKICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gIjIwMCIpIHsKICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgJiYgdHlwZSA9PT0gImJsb2IiKSB7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5kYXRhKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgTWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBzaG93Q2xvc2U6IHRydWUsCiAgICAgICAgbWVzc2FnZTogJ+ezu+e7n+W8guW4uO+8jOivt+eojeWQjumHjeivle+8gScKICAgICAgfSk7CiAgICB9CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBwb3N0OiBmdW5jdGlvbiBwb3N0KHVybCwgcGFyYW1zKSB7CiAgICByZXR1cm4gYXhpb3MoewogICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgdXJsOiB1cmwsCiAgICAgIGRhdGE6IHBhcmFtcwogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmV0dXJuIGNoZWNrU3RhdHVzKHJlc3BvbnNlKTsKICAgIH0pOwogIH0sCiAgcG9zdFdpdGhCbG9iOiBmdW5jdGlvbiBwb3N0V2l0aEJsb2IodXJsLCBwYXJhbXMpIHsKICAgIHJldHVybiBheGlvcyh7CiAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICB1cmw6IHVybCwKICAgICAgZGF0YTogcGFyYW1zLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJwogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgcmV0dXJuIGNoZWNrU3RhdHVzKHJlc3BvbnNlLCAiYmxvYiIpOwogICAgfSk7CiAgfSwKICBnZXQ6IGZ1bmN0aW9uIGdldCh1cmwsIHBhcmFtcykgewogICAgcGFyYW1zID0gcXMuc3RyaW5naWZ5KHBhcmFtcyk7CiAgICByZXR1cm4gYXhpb3MoewogICAgICBtZXRob2Q6ICJnZXQiLAogICAgICB1cmw6IHVybCwKICAgICAgcGFyYW1zOiBwYXJhbXMKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiBjaGVja1N0YXR1cyhyZXNwb25zZSk7CiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["D:/GitRepo/bsm/front/src/utils/request.js"],"names":["axios","qs","router","Loading","Message","loading","openLoading","service","lock","text","background","closeLoading","close","interceptors","request","use","config","localStorage","session","headers","Authorization","error","Promise","reject","response","data","errorCode","type","duration","showClose","message","removeItem","push","name","resolve","defaults","baseURL","withCredentials","post","timeout","checkStatus","status","code","url","params","method","then","postWithBlob","responseType","get","stringify"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport qs from \"qs\"; //处理参数\r\nimport router from '../router';\r\nimport { Loading } from 'element-ui';\r\nimport { Message } from 'element-ui';\r\n\r\nlet loading = null;\r\n\r\n//开始加载动画\r\nfunction openLoading(){\r\n    loading = Loading.service({\r\n        lock:true,\r\n        text:'拼命加载中...',\r\n        background:'rgba(0,0,0,.7)'\r\n    });\r\n}\r\n\r\n//关闭加载动画\r\nfunction closeLoading(){\r\n    loading.close();\r\n}\r\n\r\n//添加请求拦截器\r\naxios.interceptors.request.use(\r\n    config => {\r\n        //加载动画\r\n        openLoading()\r\n        if(localStorage.session){\r\n            config.headers.Authorization = localStorage.session\r\n        }\r\n        return config;\r\n    },\r\n    error => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n//添加响应拦截器\r\naxios.interceptors.response.use(\r\n    response => {\r\n        closeLoading()//关闭加载动画\r\n        if(response.data.errorCode == -1){ //后端反回的状态值，本应该errorCode是status\r\n            Message({\r\n                type:'warning',\r\n                duration:1500,\r\n                showClose: true,\r\n                message:'当前登录已失效，请从新登录！'\r\n            })\r\n            localStorage.removeItem(\"session\")//清除sessionId\r\n            localStorage.removeItem(\"userName\")//清除username\r\n            localStorage.removeItem(\"modules\")//清除权限\r\n            router.push({name: 'login'});\r\n        }\r\n        return response;\r\n    },\r\n    error => {\r\n        closeLoading() // 关闭加载动画\r\n        return Promise.resolve(error.response);\r\n    }\r\n);\r\n\r\naxios.defaults.baseURL = \"http://129.204.251.179:8083\";\r\naxios.defaults.withCredentials = true;\r\naxios.defaults.headers.post[\"Content-Type\"] = \"application/json\";\r\naxios.defaults.headers.post[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\naxios.defaults.timeout = 6000; //设置请求超时时间\r\n\r\nfunction checkStatus(response,type) {\r\n    return new Promise((resolve) => {\r\n        if(response && (response.status === 200 || response.status === 304 || response.status === 400)){\r\n            if (response.data.code === \"200\"){\r\n                resolve(response.data);\r\n            } else if (type && type === \"blob\"){\r\n                resolve(response.data)\r\n            } else{\r\n                Message({\r\n                    type:'error',\r\n                    showClose: true,\r\n                    message:response.data.message\r\n                })\r\n            }\r\n        } else{\r\n            Message({\r\n                type:'error',\r\n                showClose: true,\r\n                message:'系统异常，请稍后重试！'\r\n            })\r\n        }\r\n    });\r\n}\r\n\r\nexport default {\r\n    post(url, params) {\r\n        return axios({\r\n            method: \"post\",\r\n            url,\r\n            data: params\r\n        }).then(response => {\r\n            return checkStatus(response);\r\n        });\r\n    },\r\n    postWithBlob(url,params){\r\n        return axios({\r\n            method: \"post\",\r\n            url,\r\n            data: params,\r\n            responseType: 'blob'\r\n        }).then(response => {\r\n            return checkStatus(response,\"blob\");\r\n        });\r\n    },\r\n    get(url, params) {\r\n        params = qs.stringify(params);\r\n        return axios({\r\n            method: \"get\",\r\n            url,\r\n            params\r\n        }).then(response => {\r\n            return checkStatus(response);\r\n        });\r\n    }\r\n};\r\n"]}]}