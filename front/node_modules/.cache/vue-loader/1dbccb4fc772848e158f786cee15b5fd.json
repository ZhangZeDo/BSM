{"remainingRequest":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GitRepo\\MWD\\mwd\\front\\src\\views\\homePage\\search.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GitRepo\\MWD\\mwd\\front\\src\\views\\homePage\\search.vue","mtime":1590565634893},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJzZWFyY2giLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgbWVkaWFXb3JrczpbXSwKICAgICAgICAgICAgcGFnZVNpemU6NiwKICAgICAgICAgICAgcGFnZToxLAogICAgICAgICAgICB0b3RhbDowLAogICAgICAgICAgICBzZWFyY2hJbnB1dDonJywKICAgICAgICAgICAgbWVkaWFUeXBlOicnLAogICAgICAgICAgICBtZWRpYVR5cGVMaXN0OltdLAogICAgICAgIH0KICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0QWxsTWVkaWFUeXBlKCkKICAgICAgICB0aGlzLnF1ZXJ5TWVkaWFXb3Jrc0xpc3QoKQogICAgfSwKICAgIG1ldGhvZHM6ewogICAgICAgIHBhcnNlU3RyaW5nKHZhbCl7CiAgICAgICAgICAgIGlmICh2YWwubGVuZ3RoPjYwKXsKICAgICAgICAgICAgICAgIHZhbCA9IHZhbC5zdWJzdHJpbmcoMCw2MCkrIi4uLiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHZhbAogICAgICAgIH0sCiAgICAgICAgZ2V0QWxsTWVkaWFUeXBlKCl7CiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9tZWRpYVR5cGUvZ2V0QWxsTWVkaWFUeXBlJyx7CiAgICAgICAgICAgICAgICBzdGF0dXM6JzEnCiAgICAgICAgICAgIH0pLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhVHlwZUxpc3QgPSByZXNwLmRhdGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCiAgICAgICAgcXVlcnlNZWRpYVdvcmtzTGlzdCgpewogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvbWVkaWFXb3JrL21lZGlhV29ya0xpc3QnLHsKICAgICAgICAgICAgICAgIHN0YXR1czoxLAogICAgICAgICAgICAgICAgcGFnZTp0aGlzLnBhZ2UsCiAgICAgICAgICAgICAgICBwYWdlU2l6ZTp0aGlzLnBhZ2VTaXplLAogICAgICAgICAgICAgICAgb3JkZXI6dGhpcy5vcmRlciwKICAgICAgICAgICAgICAgIG1lZGlhVHlwZTogdGhpcy5tZWRpYVR5cGUsCiAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dDp0aGlzLnNlYXJjaElucHV0CiAgICAgICAgICAgIH0pLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgaWYgKHJlc3AuY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhV29ya3MgPSByZXNwLmRhdGEuaXRlbXM7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AuZGF0YS50b3RhbDsKICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcC5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAgICAgICB0aGlzLnBhZ2VTaXplID0gdmFsCiAgICAgICAgICAgIHRoaXMucXVlcnlNZWRpYVdvcmtzTGlzdCgpCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICAgICAgICB0aGlzLnBhZ2UgPSB2YWwKICAgICAgICAgICAgdGhpcy5xdWVyeU1lZGlhV29ya3NMaXN0KCkKICAgICAgICB9LAogICAgICAgIGNoYW5nZU9yZGVyKHZhbCl7CiAgICAgICAgICAgIHRoaXMub3JkZXIgPSB2YWwubmFtZQogICAgICAgICAgICB0aGlzLnF1ZXJ5TWVkaWFXb3Jrc0xpc3QoKQogICAgICAgIH0sCiAgICAgICAgc2hvd0RldGFpbCh2YWwpewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDonL21lZGlhRGV0YWlsJyxxdWVyeTp7Im1lZGlhSWQiOnZhbH19KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"search.vue","sourceRoot":"src/views/homePage","sourcesContent":["<template>\r\n    <div >\r\n        <div style=\"width: 1400px; height: 100px;padding-top:40px; margin: 0 auto\">\r\n            <div align=\"center\">\r\n                <el-input size=\"big\" placeholder=\"请输入作品标题或备注\" v-model=\"searchInput\" class=\"input-with-select\" style=\"width: 800px\">\r\n                    <el-select v-model=\"mediaType\" slot=\"prepend\" placeholder=\"请选择\" style=\"width: 120px\">\r\n                        <el-option value=\"\" label=\"所有类型\"></el-option>\r\n                        <el-option\r\n                                v-for=\"item in mediaTypeList\"\r\n                                :key=\"item.id\"\r\n                                :label=\"item.typeName\"\r\n                                :value=\"item.id\">\r\n                        </el-option>\r\n                    </el-select>\r\n                    <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"queryMediaWorksList\"></el-button>\r\n                </el-input>\r\n            </div>\r\n        </div>\r\n        <div style=\"width: 1422px;padding-top: 0px; margin: 0 auto\">\r\n            <div style=\"padding-top: 5px;padding-left: 10px\">\r\n                <el-row>\r\n                    <el-col :span=\"8\" v-for=\"index in mediaWorks\" :key=\"index.id\" >\r\n                        <el-card style=\"padding-top:5px; margin-top:15px;width: 426px;height: 350px;float: left\">\r\n                            <div style=\"float: left\">\r\n                                <img style=\"width: 395px;height: 200px\" :src=\"index.mediaCover\" class=\"image\" @click=\"showDetail(index.id)\"/>\r\n                            </div>\r\n                            <div style=\"float: left;width: 288px;height:95px;padding-left: 5px;\">\r\n                                <span style=\"font-weight: bolder\">{{index.mediaName}}</span><br>\r\n                                <span style=\"font-size: xx-small\">{{parseString(index.mediaRemark) }}</span><br><br>\r\n                            </div>\r\n                            <div style=\"float: left;width: 288px;padding-left: 5px;\">\r\n                                <div style=\"width: 50px;height: 20px;float: left\">\r\n                                    <img style=\"width: 30px;height: 20px;float: left\" src=\"../static/img/homePageEye.svg\"/>\r\n                                    <span style=\"float: left;margin-top: 2px\">{{index.popularNum}}</span>\r\n                                </div>\r\n                                <div style=\"width: 50px;height: 20px;float: left\">\r\n                                    <img style=\"width: 30px;height: 20px;float: left\" src=\"../static/img/hoemPageMsg.svg\"/>\r\n                                    <span style=\"float: left;margin-top: 2px;padding-left: 3px\">{{index.discussNum}}</span>\r\n                                </div>\r\n                                <div style=\"width: 50px;height: 20px;float: left\" >\r\n                                    <img style=\"width: 30px;height: 20px;float: left\" src=\"../static/img/homePageGood.svg\"/>\r\n                                    <span style=\"float: left;margin-top: 2px;padding-left: 3px\">{{index.recommendNum}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <div align=\"center\" style=\"margin-bottom: 10px;padding-top: 20px\">\r\n                    <div class=\"block\" style=\"padding: 0 32px\">\r\n                        <el-pagination\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"page\"\r\n                                :page-sizes=\"[6, 9, 15, 21]\"\r\n                                :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"total\">\r\n                        </el-pagination>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"search\",\r\n        data(){\r\n            return{\r\n                mediaWorks:[],\r\n                pageSize:6,\r\n                page:1,\r\n                total:0,\r\n                searchInput:'',\r\n                mediaType:'',\r\n                mediaTypeList:[],\r\n            }\r\n        },\r\n        created() {\r\n            this.getAllMediaType()\r\n            this.queryMediaWorksList()\r\n        },\r\n        methods:{\r\n            parseString(val){\r\n                if (val.length>60){\r\n                    val = val.substring(0,60)+\"...\";\r\n                }\r\n                return val\r\n            },\r\n            getAllMediaType(){\r\n                this.$axios.post('/mediaType/getAllMediaType',{\r\n                    status:'1'\r\n                }).then(resp=>{\r\n                    if (resp.code == 200) {\r\n                        this.mediaTypeList = resp.data\r\n                    }\r\n                });\r\n            },\r\n\r\n            queryMediaWorksList(){\r\n                this.$axios.post('/mediaWork/mediaWorkList',{\r\n                    status:1,\r\n                    page:this.page,\r\n                    pageSize:this.pageSize,\r\n                    order:this.order,\r\n                    mediaType: this.mediaType,\r\n                    searchInput:this.searchInput\r\n                }).then(resp=>{\r\n                    if (resp.code == 200) {\r\n                        this.mediaWorks = resp.data.items;\r\n                        this.total = resp.data.total;\r\n                    }else{\r\n                        this.$message.error(resp.data.message);\r\n                    }\r\n                });\r\n            },\r\n\r\n            handleSizeChange(val) {\r\n                this.pageSize = val\r\n                this.queryMediaWorksList()\r\n            },\r\n            handleCurrentChange(val) {\r\n                this.page = val\r\n                this.queryMediaWorksList()\r\n            },\r\n            changeOrder(val){\r\n                this.order = val.name\r\n                this.queryMediaWorksList()\r\n            },\r\n            showDetail(val){\r\n                this.$router.push({path:'/mediaDetail',query:{\"mediaId\":val}})\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n    .el-carousel__item h3 {\r\n        color: #475669;\r\n        font-size: 18px;\r\n        opacity: 0.75;\r\n        line-height: 300px;\r\n        margin: 0;\r\n    }\r\n\r\n    .el-carousel__item:nth-child(2n) {\r\n        background-color: #99a9bf;\r\n    }\r\n\r\n    .el-carousel__item:nth-child(2n+1) {\r\n        background-color: #d3dce6;\r\n    }\r\n\r\n    .el-select .el-input {\r\n        width: 130px;\r\n    }\r\n    .input-with-select .el-input-group__prepend {\r\n        background-color: #fff;\r\n    }\r\n</style>\r\n"]}]}