{"remainingRequest":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\GitRepo\\MWD\\mwd\\front\\src\\views\\homePage\\news.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\GitRepo\\MWD\\mwd\\front\\src\\views\\homePage\\news.vue","mtime":1589698364023},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GitRepo\\MWD\\mwd\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJuZXdzIiwKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBxdWVyeUZvcm06ewogICAgICAgICAgICAgICAgcGFnZVNpemU6NiwKICAgICAgICAgICAgICAgIHBhZ2U6MSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG90YWw6MCwKICAgICAgICAgICAgbmV3c0xpc3Q6W10sCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5xdWVyeURhdGEoKTsKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBwYXJzZVRpbWUoZGF0ZU9iaikgewogICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVPYmopOwogICAgICAgICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgdmFyIG1vbnRoID0gKCIwIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpOwogICAgICAgICAgICB2YXIgZGF5ID0gKCIwIiArIGRhdGUuZ2V0RGF0ZSgpKS5zbGljZSgtMik7CiAgICAgICAgICAgIHZhciBob3VyID0gKCIwIiArIGRhdGUuZ2V0SG91cnMoKSkuc2xpY2UoLTIpOwogICAgICAgICAgICB2YXIgbWluID0gKCIwIiArIGRhdGUuZ2V0TWludXRlcygpKS5zbGljZSgtMik7CiAgICAgICAgICAgIHZhciBzZWNvbmQgPSAoIjAiICsgZGF0ZS5nZXRTZWNvbmRzKCkpLnNsaWNlKC0yKTsKICAgICAgICAgICAgcmV0dXJuIHllYXIgKyAiLSIgKyBtb250aCArICItIiArIGRheSArICIgIiArIGhvdXIgKyAiOiIgKyBtaW4gKyAiOiIgKyBzZWNvbmQ7CiAgICAgICAgfSwKICAgICAgICBxdWVyeURhdGEoKXsKICAgICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL25ld3MvcXVlcnlOZXdzTGlzdCcsewogICAgICAgICAgICAgICAgcGFnZVNpemU6dGhpcy5xdWVyeUZvcm0ucGFnZVNpemUsCiAgICAgICAgICAgICAgICBwYWdlOnRoaXMucXVlcnlGb3JtLnBhZ2UKICAgICAgICAgICAgfSkudGhlbihyZXNwPT57CiAgICAgICAgICAgICAgICBpZiAocmVzcC5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3c0xpc3QgPSByZXNwLmRhdGEuaXRlbXM7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3AuZGF0YS50b3RhbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICAgICAgICB0aGlzLnF1ZXJ5Rm9ybS5wYWdlU2l6ZSA9IHZhbDsKICAgICAgICAgICAgdGhpcy5xdWVyeURhdGEoKQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgICAgICAgdGhpcy5xdWVyeUZvcm0ucGFnZSA9IHZhbDsKICAgICAgICAgICAgdGhpcy5xdWVyeURhdGEoKQogICAgICAgIH0sCiAgICAgICAgZG93bkxvYWRGaWxlKHJvdyl7CiAgICAgICAgICAgIHZhciBmaWxlVXJsID0gcm93LmR1cmF0aW9uOwogICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBmaWxlVXJsLnN1YnN0cmluZyhmaWxlVXJsLmxhc3RJbmRleE9mKCIvIikrMSxmaWxlVXJsLmxlbmd0aCk7CiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3RXaXRoQmxvYignL25ld3MvZG93bmxvYWRGaWxlJyx7CiAgICAgICAgICAgICAgICBkdXJhdGlvbjpyb3cuZHVyYXRpb24sCiAgICAgICAgICAgIH0pLnRoZW4ocmVzcD0+ewogICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUuaW5mbyhyZXNwKQogICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHJlc3A7CiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdKQogICAgICAgICAgICAgICAgaWYgKCdkb3dubG9hZCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKSB7IC8vIOmdnklF5LiL6L29CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJykKICAgICAgICAgICAgICAgICAgICBlbGluay5kb3dubG9hZCA9IGZpbGVOYW1lCiAgICAgICAgICAgICAgICAgICAgZWxpbmsuc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgICAgICAgICAgICAgIGVsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGluaykKICAgICAgICAgICAgICAgICAgICBlbGluay5jbGljaygpCiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChlbGluay5ocmVmKSAvLyDph4rmlL5VUkwg5a+56LGhCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbGluaykKICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIElFMTAr5LiL6L29CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLm1zU2F2ZUJsb2IoYmxvYiwgZmlsZU5hbWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCgogICAgICAgIH0KICAgIH0KCn0K"},{"version":3,"sources":["news.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"news.vue","sourceRoot":"src/views/homePage","sourcesContent":["<template>\r\n    <div >\r\n        <div style=\"width: 1382px;padding-top: 30px; margin: 0 auto\">\r\n            <div style=\"padding-top: 5px;padding-left: 30px\">\r\n                <el-row>\r\n                    <el-col :span=\"8\" v-for=\"index in newsList\" :key=\"index.id\" >\r\n                        <el-card style=\"padding-top:5px; margin-top:15px;width: 426px;height: 350px;float: left\">\r\n                            <div slot=\"header\">\r\n                                <span>{{index.title}}</span>\r\n                                <span style=\"font-size: x-small;float: right;margin-top: 20px\">{{parseTime(index.createDatetime)}}</span>\r\n                            </div>\r\n                            <div style=\"float: left;width: 380px;height:240px;padding-left: 5px;\">\r\n                                <el-input type=\"textarea\" :rows=\"10\" v-model=\"index.content\" readonly=\"\"></el-input>\r\n                            </div>\r\n                            <div>\r\n                                <el-link v-if=\"index.duration\" @click=\"downLoadFile(index)\" type=\"primary\" style=\"float: right\">附件下载</el-link>\r\n                            </div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <div align=\"center\" style=\"padding-top: 20px\">\r\n                    <div class=\"block\">\r\n                        <el-pagination\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"queryForm.page\"\r\n                                :page-size=\"queryForm.pageSize\"\r\n                                :page-sizes=\"[6,9,12,15]\"\r\n                                layout=\"total, sizes,prev, pager, next, jumper\"\r\n                                :total=\"total\">\r\n                        </el-pagination>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"news\",\r\n        data(){\r\n            return {\r\n                queryForm:{\r\n                    pageSize:6,\r\n                    page:1,\r\n                },\r\n                total:0,\r\n                newsList:[],\r\n            }\r\n        },\r\n        created() {\r\n            this.queryData();\r\n        },\r\n        methods:{\r\n            parseTime(dateObj) {\r\n                var date = new Date(dateObj);\r\n                var year = date.getFullYear();\r\n                var month = (\"0\" + (date.getMonth() + 1)).slice(-2);\r\n                var day = (\"0\" + date.getDate()).slice(-2);\r\n                var hour = (\"0\" + date.getHours()).slice(-2);\r\n                var min = (\"0\" + date.getMinutes()).slice(-2);\r\n                var second = (\"0\" + date.getSeconds()).slice(-2);\r\n                return year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + min + \":\" + second;\r\n            },\r\n            queryData(){\r\n                this.$axios.post('/news/queryNewsList',{\r\n                    pageSize:this.queryForm.pageSize,\r\n                    page:this.queryForm.page\r\n                }).then(resp=>{\r\n                    if (resp.code == 200) {\r\n                        this.newsList = resp.data.items;\r\n                        this.total = resp.data.total;\r\n                    }\r\n                });\r\n            },\r\n            handleSizeChange(val) {\r\n                this.queryForm.pageSize = val;\r\n                this.queryData()\r\n            },\r\n            handleCurrentChange(val) {\r\n                this.queryForm.page = val;\r\n                this.queryData()\r\n            },\r\n            downLoadFile(row){\r\n                var fileUrl = row.duration;\r\n                var fileName = fileUrl.substring(fileUrl.lastIndexOf(\"/\")+1,fileUrl.length);\r\n                this.$axios.postWithBlob('/news/downloadFile',{\r\n                    duration:row.duration,\r\n                }).then(resp=>{\r\n                    window.console.info(resp)\r\n                    const content = resp;\r\n                    const blob = new Blob([content])\r\n                    if ('download' in document.createElement('a')) { // 非IE下载\r\n                        const elink = document.createElement('a')\r\n                        elink.download = fileName\r\n                        elink.style.display = 'none'\r\n                        elink.href = URL.createObjectURL(blob)\r\n                        document.body.appendChild(elink)\r\n                        elink.click()\r\n                        URL.revokeObjectURL(elink.href) // 释放URL 对象\r\n                        document.body.removeChild(elink)\r\n                    } else { // IE10+下载\r\n                        navigator.msSaveBlob(blob, fileName)\r\n                    }\r\n                })\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}